(this.webpackJsonpideator=this.webpackJsonpideator||[]).push([[0],{155:function(e,t,n){},156:function(e,t,n){},167:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),o=n(42),c=n.n(o),s=(n(155),n(156),n(90)),r=n(91);n(157),n(171);console.log("initialize firebase app"),r.a.initializeApp({apiKey:"AIzaSyC02M3EXWtVG8RXJAmOuWJTVWk8ilYLhqg",authDomain:"ideator-4f754.firebaseapp.com",projectId:"ideator-4f754",storageBucket:"ideator-4f754.appspot.com",messagingSenderId:"659192949117",appId:"1:659192949117:web:583b0a392554692a164414",measurementId:"G-GRKLL11NWW"});var u=r.a.auth(),l=r.a.firestore(),d=l.collection("questions"),j=l.collection("editors"),b=new r.a.auth.GoogleAuthProvider,h=n(184),O=n(183),f=n(188),p=n(187),v=n(15),x="ADD_EDITORS",g="SET_IS_EDITOR",m=n(86),y=n(136),Q=n(39),S=n.n(Q),w={editors:[],isEditor:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(v.a)(Object(v.a)({},e),{},{editors:S.a.concat(e.editors,t.payload)});case g:return Object(v.a)(Object(v.a)({},e),{},{isEditor:t.payload});default:return e}},E="ADD_QUESTIONS",U={universalQuestions:[],individualQuestions:[]},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(v.a)(Object(v.a)({},e),{},{universalQuestions:S.a.concat(e.universalQuestions,t.payload.newUniversalQuestions),individualQuestions:S.a.concat(e.individualQuestions,t.payload.newIndividualQuestions)});default:return e}},A=Object(m.combineReducers)({editors:I,questions:q}),D=Object(m.createStore)(A,Object(y.composeWithDevTools)()),C=function(e){var t=S.a.filter(e,(function(e){return e.isUniversal})),n=S.a.filter(e,(function(e){return!e.isUniversal}));return{type:E,payload:{newUniversalQuestions:t,newIndividualQuestions:n}}},W=function(){j.get().then((function(e){console.log("get editors from firebase"),e.forEach((function(e){var t;console.log(e.data()),D.dispatch((t=e.data(),{type:x,payload:t})),u.currentUser.uid===e.data().id&&D.dispatch({type:g,payload:!0})}))}))},k=function(){console.log("run initial script"),W(),d.where("isUniversal","==",!0).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id})}));d.where("user","==",u.currentUser.uid).onSnapshot((function(e){var n=e.docs.map((function(e){return Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id})})),i=S.a.unionBy(n,t,(function(e){return e.id}));D.dispatch(C(i))}))}),(function(e){console.log(e)}))},R=n(9),T=function(){return Object(R.jsxs)(O.a,{textAlign:"center",children:[Object(R.jsx)(f.a,{as:"h1",children:"Welcome to Ideator"}),Object(R.jsx)(f.a,{as:"h3",children:"Helping build meaningful relationships with insightful questions"}),Object(R.jsx)(p.a,{color:"google plus",onClick:function(){u.signInWithPopup(b).then((function(e){console.log(e),k()})).catch((function(e){console.log(e)}))},children:"Sign in with Google"})]})},B=n(185),G=n(190),J=(n(167),n(74)),N=Object(J.b)((function(e){return{isEditor:e.editors.isEditor}}),(function(e){return{addQuestions:function(t){return e(C(t))}}}))((function(e){var t={question:"",description:"",isUniversal:!1,user:u.currentUser.uid},n=Object(i.useState)(t),a=Object(s.a)(n,2),o=a[0],c=a[1];return Object(R.jsx)("div",{className:"root",children:Object(R.jsxs)(B.a,{onSubmit:function(){d.add(o).then((function(){c(t),e.addQuestions([o])})).catch((function(e){console.log(e)}))},className:"form-container",children:[Object(R.jsx)(B.a.Input,{type:"text",label:"Enter Question",value:o.question,onChange:function(e){return c(Object(v.a)(Object(v.a)({},o),{},{question:e.target.value}))}}),Object(R.jsx)(B.a.TextArea,{type:"text",label:"Enter Description",value:o.description,onChange:function(e){return c(Object(v.a)(Object(v.a)({},o),{},{description:e.target.value}))}}),e.isEditor&&Object(R.jsx)(B.a.Field,{children:Object(R.jsx)(G.a,{label:"Show this question to all users on Ideator",checked:o.isUniversal,onChange:function(){return c(Object(v.a)(Object(v.a)({},o),{},{isUniversal:!o.isUniversal}))}})}),Object(R.jsx)(B.a.Button,{children:"Submit"})]})})})),_=n(186),z=Object(J.b)((function(e){return{universalQuestions:e.questions.universalQuestions,individualQuestions:e.questions.individualQuestions}}))((function(e){var t=e.universalQuestions,n=(e.individualQuestions,function(){return Object(R.jsx)(_.a.Header,{children:Object(R.jsx)(_.a.Row,{children:Object.keys(t[0]).map((function(e){return Object(R.jsx)(_.a.HeaderCell,{children:e})}))})})});return Object(R.jsx)(R.Fragment,{children:t[0]&&Object(R.jsxs)(_.a,{celled:!0,children:[Object(R.jsx)(n,{}),Object(R.jsx)(_.a.Body,{children:t.map((function(e){return Object(R.jsx)(_.a.Row,{children:Object.values(e).map((function(e){return Object(R.jsx)(_.a.Cell,{children:e})}))})}))})]})})})),F=n(13),H=function(){var e=Object(i.useState)(null!=u.currentUser),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(!0),c=Object(s.a)(o,2),r=c[0],l=c[1];Object(i.useEffect)((function(){u.onAuthStateChanged((function(e){a(!!e),l(!1)}))}),[]);var d=function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(F.a,{path:"/",exact:!0,component:z}),Object(R.jsx)(F.a,{path:"/input",exact:!0,component:N})]})};return Object(R.jsx)("div",{children:r?Object(R.jsx)(h.a,{active:!0}):n?Object(R.jsx)(d,{}):Object(R.jsx)(T,{})})};n(169);var L=function(){return Object(R.jsx)(H,{})},K=n(124);k(),c.a.render(Object(R.jsx)(K.a,{children:Object(R.jsx)(J.a,{store:D,children:Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsx)(L,{})})})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.694af0f3.chunk.js.map